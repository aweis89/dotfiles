#!/bin/bash

set -e

pip install pyobjc 1>/dev/null

dir=$(
	cd $(dirname "$0")
	pwd
)

mkdir -p ~/Library/LaunchAgents
mkdir -p ~/.local/share/kitty/current-theme.conf
sudo ln -sf $(which tmux) /usr/local/bin/tmux
ln -sf "${dir}/com.aweis.theme-reactor.plist" ~/Library/LaunchAgents/com.aweis.theme-reactor.plist
launchctl unload ~/Library/LaunchAgents/com.aweis.theme-reactor.plist 2>/dev/null || true
launchctl load -w ~/Library/LaunchAgents/com.aweis.theme-reactor.plist
